# éŠæˆ²èˆ‡å­¸ç¿’åŠŸèƒ½é–‹é—œæ§åˆ¶ å¯¦ä½œè¨ˆç•«

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°
è®“å®¶é•·å¯ä»¥åœ¨å¾Œå°æ§åˆ¶ã€Œçå‹µæ™‚é–“ã€å’Œã€Œå­¸ç¿’æ›¸æ¡Œã€å€å¡Šçš„é¡¯ç¤ºï¼Œä»¥åŠæ§åˆ¶æ¯å€‹å€‹åˆ¥éŠæˆ²/å­¸ç¿’é …ç›®çš„é–‹å•Ÿç‹€æ…‹ã€‚

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### å±¤ç´šçµæ§‹
```
å®¶é•·è¨­å®š
â”œâ”€â”€ ğŸ® çå‹µéŠæˆ²å€å¡Š (é è¨­:é–‹)
â”‚   â”œâ”€â”€ æ–¹å¡Šè¡åˆº
â”‚   â”œâ”€â”€ å°„æ“ŠéŠæˆ²
â”‚   â”œâ”€â”€ ä¿„ç¾…æ–¯æ–¹å¡Š ...
â”‚
â””â”€â”€ ğŸ“š å­¸ç¿’æ›¸æ¡Œå€å¡Š (é è¨­:é–‹)
    â”œâ”€â”€ å–®å­—å¬å–šè¡“
    â”œâ”€â”€ ç™¼éŸ³é¸å–®å­—
    â”œâ”€â”€ åŠ æ³•ç·´ç¿’ ...
```

### é‚è¼¯
- ä¸»é–‹é—œ**é—œé–‰** â†’ æ•´å€‹å€å¡Šä¸é¡¯ç¤º
- ä¸»é–‹é—œ**é–‹å•Ÿ** â†’ é¡¯ç¤ºå€å¡Šï¼Œä½†å€‹åˆ¥é …ç›®å¯ç¨ç«‹é–‹/é—œ

---

## ğŸ“Š è³‡æ–™åº«è®Šæ›´

### æ“´å…… `family_settings` è¡¨æ ¼
```sql
ALTER TABLE family_settings
ADD COLUMN IF NOT EXISTS fun_games_enabled BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS learning_area_enabled BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS disabled_games TEXT[] DEFAULT '{}';
```

**æ¬„ä½èªªæ˜:**
| æ¬„ä½ | é¡å‹ | é è¨­ | èªªæ˜ |
|------|------|------|------|
| `fun_games_enabled` | BOOLEAN | true | çå‹µéŠæˆ²ä¸»é–‹é—œ |
| `learning_area_enabled` | BOOLEAN | true | å­¸ç¿’æ›¸æ¡Œä¸»é–‹é—œ |
| `disabled_games` | TEXT[] | [] | è¢«ç¦ç”¨çš„éŠæˆ² ID é™£åˆ— |

---

## ğŸ§© TypeScript é¡å‹æ›´æ–°

### `src/types/database.ts`
```typescript
export interface FamilySettings {
    // ... existing fields
    fun_games_enabled: boolean;
    learning_area_enabled: boolean;
    disabled_games: string[];  // e.g. ['tetris', 'snake', 'spelling']
}
```

---

## ï¿½ UI è¨­è¨ˆè¦ç¯„

### è¨­è¨ˆé¢¨æ ¼: Pixel RPG (èˆ‡ç¾æœ‰ä¸€è‡´)
- **ä¸»é–‹é—œ**: å¤§å‹ Toggle Switch + æ¨™é¡Œ
- **å€‹åˆ¥éŠæˆ²**: å…©æ¬„æ¸…å–® + å°å‹ Toggle
- **å±¤ç´šè¦–è¦º**: å­é …ç›®å…§ç¸® + ç°åº•å€å¡Š

### è‰²å½©
| å…ƒç´  | é–‹å•Ÿ | é—œé–‰ |
|------|------|------|
| Toggle é–‹é—œ | `bg-green-500` | `bg-gray-300` |
| éŠæˆ²å¡ç‰‡ | æ­£å¸¸é¡¯ç¤º | `opacity-50` |

### äº’å‹•è¦æ ¼
- Toggle å‹•ç•«: 150ms ease-out
- ä¸»é–‹é—œé—œé–‰æ™‚ï¼Œå­é …ç›® Toggle è®Šç‚º disabled ç‹€æ…‹
- å„²å­˜æ™‚è‡ªå‹•é¡¯ç¤º Toast è¨Šæ¯

---

## ğŸ“ å¯¦ä½œæª”æ¡ˆæ¸…å–®

### 1. è³‡æ–™åº«è…³æœ¬
- **æª”æ¡ˆ**: `supabase/add_game_permissions.sql`
- **å…§å®¹**: ALTER TABLE æ–°å¢æ¬„ä½

### 2. é¡å‹å®šç¾©
- **æª”æ¡ˆ**: `src/types/database.ts`
- **è®Šæ›´**: æ“´å…… `FamilySettings` ä»‹é¢

### 3. é è¨­å€¼
- **æª”æ¡ˆ**: `src/hooks/useFamilySettings.ts`
- **è®Šæ›´**: æ›´æ–° `DEFAULT_FAMILY_SETTINGS`

### 4. å®¶é•·è¨­å®šé é¢
- **æª”æ¡ˆ**: `src/pages/ParentSettings.tsx`
- **è®Šæ›´**: æ–°å¢ã€ŒéŠæˆ²èˆ‡å­¸ç¿’ç®¡ç†ã€å€å¡Š

### 5. çå‹µå€å¡Š
- **æª”æ¡ˆ**: `src/components/RewardTime.tsx`
- **è®Šæ›´**: ä¾æ“šè¨­å®šéæ¿¾é¡¯ç¤ºçš„éŠæˆ²

### 6. å­¸ç¿’å€å¡Š
- **æª”æ¡ˆ**: `src/components/LearningArea.tsx`
- **è®Šæ›´**: ä¾æ“šè¨­å®šéæ¿¾é¡¯ç¤ºçš„å­¸ç¿’é …ç›®

---

## ğŸ”„ å¯¦ä½œæ­¥é©Ÿ

### Step 1: è³‡æ–™åº«è®Šæ›´
å»ºç«‹ SQL è…³æœ¬æ–°å¢æ¬„ä½ã€‚

### Step 2: æ›´æ–° TypeScript é¡å‹
æ“´å…… `FamilySettings` ä»‹é¢ã€‚

### Step 3: æ›´æ–° Hook é è¨­å€¼
åœ¨ `useFamilySettings.ts` ä¸­åŠ å…¥æ–°æ¬„ä½é è¨­å€¼ã€‚

### Step 4: ä¿®æ”¹å®¶é•·è¨­å®šç•«é¢
åœ¨ `ParentSettings.tsx` æ–°å¢:
- çå‹µéŠæˆ²ä¸»é–‹é—œ + å€‹åˆ¥éŠæˆ²æ¸…å–®
- å­¸ç¿’æ›¸æ¡Œä¸»é–‹é—œ + å€‹åˆ¥å­¸ç¿’æ¸…å–®

### Step 5: ä¿®æ”¹é¡¯ç¤ºé‚è¼¯
- `RewardTime.tsx`: æª¢æŸ¥ `fun_games_enabled` å’Œ `disabled_games`
- `LearningArea.tsx`: æª¢æŸ¥ `learning_area_enabled` å’Œ `disabled_games`

### Step 6: æ¸¬è©¦èˆ‡æ¨é€
ç¢ºèªè¨­å®šå„²å­˜å’Œé¡¯ç¤ºé‚è¼¯æ­£ç¢ºã€‚

---

## âœ… é©—æ”¶æ¨™æº–
- [ ] å®¶é•·å¯åœ¨è¨­å®šé çœ‹åˆ°éŠæˆ²ç®¡ç†å€å¡Š
- [ ] ä¸»é–‹é—œå¯æ§åˆ¶æ•´å€‹å€å¡Šé¡¯ç¤º
- [ ] å€‹åˆ¥é–‹é—œå¯æ§åˆ¶å–®ä¸€éŠæˆ²
- [ ] è¨­å®šå„²å­˜å¾Œç«‹å³ç”Ÿæ•ˆ
- [ ] å­©å­ç«¯æ­£ç¢ºåæ˜ å®¶é•·è¨­å®š
